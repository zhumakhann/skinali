(this.webpackJsonpskinali=this.webpackJsonpskinali||[]).push([[0],{53:function(e,t,c){},54:function(e,t,c){},61:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){},68:function(e,t,c){},69:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){"use strict";c.r(t);var n=c(3),r=c.n(n),a=c(26),s=c.n(a),o=(c(52),c(53),c(54),c(14)),i=c(12),u=c(4),l=c(46),d=c(7),j=c(2);var b=Object(d.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,c=Object(l.a)(e,["component"]);return console.log(c),Object(j.jsx)(i.b,Object(u.a)(Object(u.a)({},c),{},{render:function(e){return c.auth.isLoggedIn?Object(j.jsx)(t,Object(u.a)({},e)):Object(j.jsx)(i.a,{to:"/auth"})}}))})),f=c(13),O=c.n(f),m=c(20),p=c(19),h=c(6);c(61);function g(e){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:e.active?"popup-overflow active":"popup-overflow",onClick:e.close}),Object(j.jsxs)("div",{className:e.active?"popup active":"popup",children:[Object(j.jsx)("button",{className:"popup__close",onClick:e.close,children:"X"}),Object(j.jsx)("div",{className:"popup__content",children:e.children})]})]})}var x="RESET",v="LOAD_START",_="LOAD_ERROR",N="AUTH_START",y="AUTH_SUCCESS",S="AUTH_FAIL",C="AUTH_LOGIN_CHANGE",E="AUTH_PASSWORD_CHANGE",D="PRODUCTS_FETCH",L="ADMIN_ADD",w="ADMIN_ADD_SUCCESS",T="ADMIN_ADD_ERROR",R="ADMIN_EDIT_SUCCESS",k="ADMIN_EDIT_ERROR",P="ADMIN_PRODUCTS_ADD",A="ADMIN_PRODUCTS_ADD_SUCCESS",I="ADMIN_PRODUCTS_ADD_ERROR",U="ADMIN_PRODUCTS_DELETE_SUCCESS",H="CATEGORIES_FETCH",F="CATEGORIES_SELECT",M="PRODUCTS_SEARCH",q="PRODUCTS_SEARCH_EDIT",G="PRODUCTS_SEARCH_RESET",V="PRODUCTS_CATEGORY_FILTER",X="PRODUCTS_SORT",W="CART_EDIT",z=c(36);c(64);z.a.initializeApp({apiKey:"AIzaSyCflv9L2ZnRArRx5-T0ZAILHuhSQrKpjWU",authDomain:"skinali-1ebab.firebaseapp.com",projectId:"skinali-1ebab",storageBucket:"skinali-1ebab.appspot.com",messagingSenderId:"735282186071",appId:"1:735282186071:web:8e95d6b01a2880fa3f2012",measurementId:"G-19NVQ89W94"});var K=z.a,Y=K.firestore(),B=function(){return function(e){e(Q());var t=[];Y.collection("products").get().then((function(e){e.forEach((function(e){return console.log("".concat(e.id," => ").concat(e.data())),t.push(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id})),t}))})).then((function(){return e(Z(t))})).catch((function(t){return e(J(t))}))}},Q=function(){return{type:v}},J=function(e){return console.log(e),{type:_,error:e}},Z=function(e){return console.log(e),{type:D,products:e}},$=K.storage().ref("images"),ee=K.firestore(),te=function(){var e=Object(p.a)(O.a.mark((function e(t,c){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.title})),e.next=3,Promise.all(n).then((function(e){return e.map((function(e){return $.child(e)}))})).then((function(e){e.map(function(){var e=Object(p.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!t){e.next=4;break}return e.next=4,t.delete();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),ce=function(){return{type:x}},ne=function(){return{type:v}},re=function(){return{type:U}},ae=function(){return{type:"ADMIN_PRODUCTS_DELETE_ERROR"}},se=function(){return{type:A}},oe=function(){return{type:I}},ie=K.firestore(),ue=function(){return function(e){e(le());var t=[];ie.collection("categories").get().then((function(e){e.forEach((function(e){return t.push(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id})),t}))})).then((function(){return e(je(t))})).catch((function(t){return e(de(t))}))}},le=function(){return{type:v}},de=function(e){return{type:_,error:e}},je=function(e){return{type:H,categories:e}},be=(c(65),c(66),K.firestore(),K.storage().ref("images"));var fe=Object(d.b)((function(e){return{adminProducts:e.adminProducts}}),(function(e){return{deleteProduct:function(t,c){return e(function(e,t){return function(){var c=Object(p.a)(O.a.mark((function c(n){return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,te(t);case 2:return c.next=4,ee.collection("products").doc(e).delete().then((function(){return n(re())})).catch((function(){return n(ae())}));case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(t,c))},fetchProducts:function(){return e(B())},editProduct:function(t,c,n,r,a,s){return e(function(e,t,c,n,r,a){return function(s){ee.collection("products").doc(e).set({name:t,description:c,price:n,images:r,category:a}).then(s(se())).catch(s(oe()))}}(t,c,n,r,a,s))}}}))((function(e){var t=function(){var t=Object(p.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.deleteProduct(c.id,c.images);case 2:o(!1);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=e.product,r=(e.cls,Object(n.useState)(!1)),a=Object(h.a)(r,2),s=a[0],o=a[1],i=Object(n.useState)(!1),u=Object(h.a)(i,2),l=u[0],d=u[1],b=Object(n.useState)(c.images||[]),f=Object(h.a)(b,2),x=f[0],v=f[1],_=Object(n.useState)(c.name),N=Object(h.a)(_,2),y=N[0],S=N[1],C=Object(n.useState)(c.description),E=Object(h.a)(C,2),D=E[0],L=E[1],w=Object(n.useState)(c.price),T=Object(h.a)(w,2),R=T[0],k=T[1],P=Object(n.useState)(""),A=Object(h.a)(P,2),I=A[0],U=A[1],H=function(){var e=Object(p.a)(O.a.mark((function e(t){var c,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.target.files[0],n=be.child(c.name),e.next=4,n.put(c);case 4:return e.next=6,n.getDownloadURL();case 6:r=e.sent,v([].concat(Object(m.a)(x),[{url:r,title:c.name}]));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(g,{active:s,close:function(){return o(!1)},children:[Object(j.jsxs)("p",{children:["\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c ",c.name,"?"]}),Object(j.jsx)("button",{className:"btn btn-danger w-100",onClick:function(){return t()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),Object(j.jsx)(g,{active:l,close:function(){return d(!1)},onSubmit:function(t){return e.onChangeHandler(t)},children:Object(j.jsxs)("form",{className:"form",onSubmit:function(t){return function(t){t.preventDefault(),e.editProduct(c.id,y,D,R,x,I)}(t)},children:[Object(j.jsx)("ul",{className:"form__images",children:x.length>=1?x.map((function(e,t){return Object(j.jsx)("img",{src:e.url,alt:e.title},t)})):null}),Object(j.jsxs)("label",{className:"form__item",children:["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",Object(j.jsx)("input",{className:"form__item-input",type:"file",onChange:function(e){return H(e)}})]}),Object(j.jsxs)("label",{className:"form__item",children:["\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0430\u0437\u0432\u0430\u043d\u0438\u0435",Object(j.jsx)("input",{className:"form__item-input",type:"text",value:y,onChange:function(e){return S(e.target.value)}})]}),Object(j.jsxs)("label",{className:"form__item",children:["\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",Object(j.jsx)("textarea",{className:"form__item-input textarea",value:D,onChange:function(e){return L(e.target.value)}})]}),Object(j.jsxs)("label",{className:"form__item",children:["\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",Object(j.jsx)("select",{className:"form__item-input",value:I,onChange:function(e){return U(e.target.value)},children:e.categories.map((function(e){return Object(j.jsx)("option",{value:e.name,children:e.name})}))})]}),Object(j.jsxs)("label",{className:"form__item",children:["\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0446\u0435\u043d\u0443",Object(j.jsx)("input",{className:"form__item-input",type:"number",value:R,onChange:function(e){return k(e.target.value)}})]}),Object(j.jsx)("button",{className:"btn btn-success form__submit w-100",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})}),Object(j.jsxs)("li",{className:"card",style:{width:"18rem"},children:[c.images.length>=1?Object(j.jsx)("img",{className:"card-img-top",src:c.images[0].url}):null,Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title",children:c.name}),Object(j.jsx)("p",{className:"card-text",children:c.description}),Object(j.jsx)("p",{className:"card-text",children:c.price}),Object(j.jsxs)("div",{className:"card-buttons",children:[Object(j.jsx)("button",{className:"btn btn-danger",onClick:function(){return o(!0)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(j.jsx)("button",{className:"btn btn-primary",onClick:function(){return d(!0)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]})]})]})}));c(67);function Oe(){return Object(j.jsxs)("div",{className:"lds-roller",children:[Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{})]})}K.firestore();var me=K.storage().ref("images");var pe=Object(d.b)((function(e){return{products:e.products,adminProducts:e.adminProducts,categories:e.categories}}),(function(e){return{fetchProducts:function(){return e(B())},addProduct:function(t,c,n,r,a){return e(function(e,t,c,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return function(){var a=Object(p.a)(O.a.mark((function a(s){return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s((function(){return ne()})),console.log("start"),console.log(n),a.prev=3,a.next=6,ee.collection("products").add({name:e,images:n,price:c,description:t,category:r}).then((function(){return s(se())})).then(s(ce()));case 6:a.next=12;break;case 8:a.prev=8,a.t0=a.catch(3),console.log(a.t0),oe();case 12:case"end":return a.stop()}}),a,null,[[3,8]])})));return function(e){return a.apply(this,arguments)}}()}(t,c,n,r,a))},resetState:function(){return e((function(e){e(ce())}))},fetchCategories:function(){return e(ue())}}}))((function(e){var t=Object(n.useState)(!1),c=Object(h.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(""),o=Object(h.a)(s,2),i=o[0],u=o[1],l=Object(n.useState)(""),d=Object(h.a)(l,2),b=d[0],f=d[1],x=Object(n.useState)(""),v=Object(h.a)(x,2),_=v[0],N=v[1],y=Object(n.useState)([]),S=Object(h.a)(y,2),C=S[0],E=S[1],D=Object(n.useState)(""),L=Object(h.a)(D,2),w=L[0],T=L[1],R=function(){var e=Object(p.a)(O.a.mark((function e(t){var c,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.target.files[0],n=me.child(c.name),e.next=4,n.put(c);case 4:return e.next=6,n.getDownloadURL();case 6:r=e.sent,E([].concat(Object(m.a)(C),[{url:r,title:c.name}]));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){}),[]),Object(n.useEffect)((function(){e.fetchCategories(),e.fetchProducts(),setTimeout(k,1e3)}),[e.adminProducts.added,e.adminProducts.deleted]);var k=function(){a(!1),u(""),f(""),N(""),E([]),e.resetState()};return e.products.isLoading||e.adminProducts.isLoading||e.categories.isLoading?Object(j.jsx)(Oe,{}):Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(g,{active:r,close:function(){return a(!1)},children:Object(j.jsxs)("form",{className:"form",onSubmit:function(t){return function(t){console.log("abc"),t.preventDefault(),e.addProduct(i,b,_,C,w)}(t)},children:[Object(j.jsx)("ul",{className:"form__images",children:C.map((function(e,t){return Object(j.jsx)("li",{className:"form__images-item",children:Object(j.jsx)("img",{src:e.url,alt:e.title})},t)}))}),Object(j.jsxs)("label",{className:"form__item",children:["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",Object(j.jsx)("input",{className:"form__item-input",type:"file",onChange:function(e){return R(e)}})]}),Object(j.jsxs)("label",{className:"form__item",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",Object(j.jsx)("input",{className:"form__item-input",type:"text",value:i,onChange:function(e){return u(e.target.value)}})]}),Object(j.jsxs)("label",{className:"form__item",children:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",Object(j.jsx)("textarea",{className:"form__item-input textarea",value:b,onChange:function(e){return f(e.target.value)}})]}),Object(j.jsxs)("label",{className:"form__item",children:["\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",Object(j.jsx)("select",{className:"form__item-input",value:w,onChange:function(e){return T(e.target.value)},children:e.categories.categories.map((function(e){return Object(j.jsx)("option",{children:e.name})}))})]}),Object(j.jsxs)("label",{className:"form__item",children:["\u0426\u0435\u043d\u0430",Object(j.jsx)("input",{className:"form__item-input",type:"number",value:_,onChange:function(e){return N(e.target.value)}})]}),Object(j.jsx)("button",{className:"btn btn-success form__submit w-100",disabled:e.adminProducts.isLoading,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})}),Object(j.jsx)("h2",{className:"title",children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u044b"}),Object(j.jsx)("button",{className:"btn btn-secondary buttons__item",onClick:function(){return a(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"}),Object(j.jsx)("ul",{className:"products__list",children:e.products.isLoading?"Loading":e.products.products.map((function(t){return Object(j.jsx)(fe,{cls:"products__item",product:t,categories:e.categories.categories},t.id)}))})]})})),he=K.firestore(),ge=function(){return{type:x}},xe=function(){return{type:R}},ve=function(){return{type:k}},_e=function(){return{type:T}};var Ne=Object(d.b)(null,(function(e){return{editCategory:function(t,c,n){return e(function(e,t,c){return function(n){console.log(e,t,c),he.collection("categories").doc(e).set({name:t,description:c}).then(n(xe())).catch(n(ve()))}}(t,c,n))},deleteCategory:function(t){return e(function(e){return function(){var t=Object(p.a)(O.a.mark((function t(c){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,he.collection("categories").doc(e).delete().then((function(){return c(xe())})).catch((function(){return c(ve())}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=Object(n.useState)(!1),c=Object(h.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(!1),o=Object(h.a)(s,2),i=o[0],u=o[1],l=Object(n.useState)(e.category.name),d=Object(h.a)(l,2),b=d[0],f=d[1],O=Object(n.useState)(e.category.description),m=Object(h.a)(O,2),p=m[0],x=m[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(g,{active:r,close:function(){return a(!1)},children:["\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c ",e.category.name,"?",Object(j.jsx)("br",{}),Object(j.jsx)("button",{className:"btn btn-danger w-100",onClick:function(){return e.deleteCategory(e.category.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),Object(j.jsx)(g,{active:i,close:function(){return u(!1)},children:Object(j.jsxs)("form",{className:"form",onSubmit:function(t){return function(t){t.preventDefault(),e.editCategory(e.category.id,b,p)}(t)},children:[Object(j.jsxs)("label",{className:"form__item",children:["\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",Object(j.jsx)("input",{className:"form__item-input",type:"text",value:b,onChange:function(e){return f(e.target.value)}})]}),Object(j.jsxs)("label",{className:"form__item",children:["\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",Object(j.jsx)("textarea",{className:"form__item-input textarea",value:p,onChange:function(e){return x(e.target.value)}})]}),Object(j.jsx)("button",{className:"btn btn-success form__submit w-100",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})}),Object(j.jsx)("li",{className:"category card",children:Object(j.jsxs)("div",{class:"card-body",children:[Object(j.jsx)("h3",{className:"category__title",children:e.category.name}),Object(j.jsx)("p",{className:"category__description",children:e.category.description}),Object(j.jsxs)("div",{className:"category__buttons",children:[Object(j.jsx)("button",{className:"category__buttons-item btn btn-danger",onClick:function(){return a(!0)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(j.jsx)("button",{className:"category__buttons-item btn btn-success",onClick:function(){return u(!0)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]})})]})}));c(68);var ye=Object(d.b)((function(e){return{categories:e.categories,adminCategories:e.adminCategories}}),(function(e){return{fetchCategories:function(){return e(ue())},addCategory:function(t,c){return e(function(e,t){return function(c){try{he.collection("categories").add({name:e,description:t}).then((function(){return c(xe())})).catch((function(){return c(ve())}))}catch(n){console.log(n),_e()}}}(t,c))},resetState:function(){return e((function(e){e(ge())}))}}}))((function(e){var t=Object(n.useState)(!1),c=Object(h.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(""),o=Object(h.a)(s,2),i=o[0],u=o[1],l=Object(n.useState)(""),d=Object(h.a)(l,2),b=d[0],f=d[1];Object(n.useEffect)((function(){e.fetchCategories(),console.log(e),setTimeout(O,1e3)}),[e.adminCategories.edited]);var O=function(){a(!1),u(""),f(""),e.resetState()};return Object(j.jsx)(j.Fragment,{children:e.categories.isLoading||e.adminCategories.isLoading?Object(j.jsx)(Oe,{}):Object(j.jsxs)("section",{className:"categories",children:[Object(j.jsx)(g,{active:r,close:function(){return a(!1)},children:Object(j.jsxs)("form",{className:"form",onSubmit:function(t){return function(t){t.preventDefault(),e.addCategory(i,b)}(t)},children:[Object(j.jsxs)("label",{className:"form__item",children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",Object(j.jsx)("input",{className:"form__item-input",type:"text",value:i,onChange:function(e){return u(e.target.value)}})]}),Object(j.jsxs)("label",{className:"form__item",children:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",Object(j.jsx)("textarea",{className:"form__item-input textarea",value:b,onChange:function(e){return f(e.target.value)}})]}),Object(j.jsx)("button",{className:"btn btn-success form__submit w-100",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})}),Object(j.jsx)("h2",{className:"title",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),Object(j.jsx)("button",{className:"btn btn-secondary",onClick:function(){return a(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}),Object(j.jsx)("ul",{className:"categories-list",children:e.categories.categories.map((function(e){return Object(j.jsx)(Ne,{category:e},e.id)}))})]})})}));function Se(){return Object(j.jsx)("div",{children:"THIS IS HOME PAGE"})}c(69);var Ce=function(e,t,c){return function(n){var r=Object(u.a)(Object(u.a)({},c),{},{quantity:1,total:+c.price}),a=[],s=e.find((function(e){return e.name===r.name})),o=e.indexOf(s);switch(t){case"add":s?(e[o].quantity++,e[o].total=e[o].price*e[o].quantity,a=Object(m.a)(e)):a=[].concat(Object(m.a)(e),[r]);break;case"delete":a=e.filter((function(e){return e!==s}));break;case"plus":e[o].quantity++,e[o].total=e[o].price*e[o].quantity,a=Object(m.a)(e);break;case"minus":e[o].quantity--,e[o].total=e[o].price*e[o].quantity,a=Object(m.a)(e),a=0===e[o].quantity?e.filter((function(e){return e!=s})):Object(m.a)(e)}var i=a.reduce((function(e,t){return e+=Number(t.total)}),0);localStorage.setItem("skinaliCart",a),n(Ee(a,i))}},Ee=function(e,t){return{type:W,products:e,total:t}},De=c(41),Le=c(42),we=c(47),Te=c(45),Re=c(43),ke=c.n(Re),Pe=function(e){Object(we.a)(c,e);var t=Object(Te.a)(c);function c(){return Object(De.a)(this,c),t.apply(this,arguments)}return Object(Le.a)(c,[{key:"render",value:function(){var e=this;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(ke.a,{env:"sandbox",client:{sandbox:"AV_L052NceFRSbpxdPfCppYKnMx0bQwTVqfhqqYznMvDTEvStraGFk1LCfn_pKhoftEbWBko0fvf6PgH",production:"YOUR-PRODUCTION-APP-ID"},currency:"USD",total:this.props.total,onError:function(t){console.log("Error!",t),e.props.onFailure()},onSuccess:function(t){console.log("The payment was succeeded!",t),e.props.onSuccess()},onCancel:function(t){console.log("The payment was cancelled!",t),e.props.onFailure()}})})}}]),c}(r.a.Component);function Ae(e){return Object(j.jsx)("div",{className:e.active?"alert active "+e.type:"alert",role:"alert",children:e.children})}var Ie=Object(d.b)((function(e){return{cart:e.cart}}),(function(e){return{cartHandler:function(t,c,n){return e(Ce(t,c,n))}}}))((function(e){var t=Object(n.useState)(!1),c=Object(h.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)("alert-success"),o=Object(h.a)(s,2),i=o[0],u=o[1],l=Object(n.useState)("\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u044f\u0432\u043a\u0443!"),d=Object(h.a)(l,2),b=d[0],f=d[1],O=function(){a(!1),u("alert-success"),f("\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u044f\u0432\u043a\u0443!")};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Ae,{type:i,active:r,children:b}),Object(j.jsxs)(g,{active:e.active,close:e.close,children:[Object(j.jsx)("ul",{className:"cart-list",children:e.cart.products.length<1?Object(j.jsx)("li",{children:"\u0422\u043e\u0432\u0430\u0440\u043e\u0432 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435 \u043d\u0435\u0442\u0443"}):e.cart.products.map((function(t,c){return Object(j.jsxs)("li",{className:"cart-item",children:[t.name,t.price,Object(j.jsxs)("div",{className:"cart-item__buttons d-flex",children:[Object(j.jsx)("button",{onClick:function(){return e.cartHandler(e.cart.products,"minus",t)},children:"-"}),t.quantity,Object(j.jsx)("button",{onClick:function(){return e.cartHandler(e.cart.products,"plus",t)},children:"+"})]}),Object(j.jsx)("button",{onClick:function(){return e.cartHandler(e.cart.products,"delete",t)},children:"Delete"})]},c)}))}),Object(j.jsx)("p",{children:e.cart.total?Object(j.jsxs)(j.Fragment,{children:[e.cart.total.toLocaleString("Ru","ru"),Object(j.jsx)(Pe,{total:e.cart.total,onSuccess:function(){a(!0),setTimeout(O,2e3)},onFailure:function(){a(!0),u("alert-danger"),f("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430"),setTimeout(O,2e3)}})]}):""})]})]})}));function Ue(){var e=Object(n.useState)(!1),t=Object(h.a)(e,2),c=t[0],r=t[1];return Object(j.jsx)("header",{className:"header client",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"header__wrapper",children:[Object(j.jsx)(o.b,{className:"header__logo",to:"/",children:"Skinali"}),Object(j.jsxs)("nav",{className:"header__nav",children:[Object(j.jsx)(o.b,{className:"header__nav-item",to:"/products",children:"\u041c\u0435\u043d\u044e"}),Object(j.jsx)(o.b,{className:"header__nav-item",to:"/categories",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),Object(j.jsx)(o.b,{className:"header__nav-item",to:"/about",children:"\u041e \u043d\u0430\u0441"})]}),Object(j.jsx)("button",{className:"btn btn-primary",children:"C",onClick:function(){return r(!0)}}),Object(j.jsx)(Ie,{active:c,close:function(){return r(!1)}})]})})})}function He(){return Object(j.jsx)("div",{children:"Hello from categories"})}var Fe=Object(d.b)((function(e){return{products:e.products}}),(function(e){return{productsSort:function(t,c){return e(function(e,t){return function(c){var n=[];"lower"===t?n=e.sort((function(e,t){return t.price-e.price})):"higher"===t&&(n=e.sort((function(e,t){return e.price-t.price}))),c({type:X,products:n})}}(t,c))}}}))((function(e){var t=e.products.filteredProducts.length>=1?e.products.filteredProducts:e.products.products;return Object(j.jsxs)("div",{className:"sort",children:[Object(j.jsx)("p",{className:"sort__text",children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e:"}),Object(j.jsxs)("select",{onChange:function(c){return function(c){console.log(e.products),console.log(c.target.value),e.productsSort(t,c.target.value)}(c)},children:[Object(j.jsx)("option",{disabled:!0,children:"\u0426\u0435\u043d\u0435"}),Object(j.jsx)("option",{value:"lower",children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e \u0446\u0435\u043d\u044b"}),Object(j.jsx)("option",{value:"higher",children:"\u041f\u043e\u043d\u0438\u0436\u0435\u043d\u0438\u044e \u0446\u0435\u043d\u044b"})]})]})}));c(74);var Me=Object(d.b)((function(e){return{cart:e.cart}}),(function(e){return{cartHandler:function(t,c,n){return e(Ce(t,c,n))}}}))((function(e){var t=e.product;return console.log(t),Object(j.jsxs)("li",{className:"card",style:{width:"18rem"},children:[t.images.length?Object(j.jsx)("img",{className:"card-img-top",src:t.images[0].url,alt:t.name}):"",Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-text",children:t.name}),Object(j.jsx)("p",{className:"card-text",children:t.description}),Object(j.jsx)("p",{className:"card-text",children:t.price})]}),Object(j.jsx)("button",{className:"btn btn-success",onClick:function(){return e.cartHandler(e.cart.products,"add",t)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})})),qe=function(e){return{type:M,products:e}};var Ge=Object(d.b)((function(e){return{search:e.search,products:e.products}}),(function(e){return{productsSearchEdit:function(t){return e(function(e){return function(t){t({type:q,value:e})}}(t))},productsFilter:function(t,c){return e(function(e,t){return function(c){console.log(t);var n=t.filter((function(t){return t.name.toLowerCase().includes(e.trim().toLowerCase())}));console.log(n),c(qe(n))}}(t,c))},productsSearchReset:function(){return e({type:G})}}}))((function(e){var t=Object(i.g)();return Object(j.jsx)("div",{className:"search",children:Object(j.jsxs)("form",{className:"search__form",onSubmit:function(c){c.preventDefault(),e.productsFilter(e.search.value,e.products.products),t.push("search")},children:[Object(j.jsx)("input",{className:"search__form-input",type:"text",value:e.search.value,onChange:function(t){return e.productsSearchEdit(t.target.value)}}),Object(j.jsx)("button",{className:"search__form-submit",children:"S"})]})})}));var Ve=Object(d.b)((function(e){return{categories:e.categories,products:e.products}}),(function(e){return{fetchCategories:function(){return e(ue())},fetchProducts:function(){return e(B())},categorySelect:function(t){return e(function(e){return function(t){t({type:F,category:e})}}(t))},productsCategoryFilter:function(t,c){return e(function(e,t){return function(c){var n=[];n="al1al1"===t?Object(m.a)(e):e.filter((function(e){return e.category===t})),console.log(n),c({type:V,products:n})}}(t,c))}}}))((function(e){Object(n.useEffect)((function(){e.productsCategoryFilter(e.products.products,e.categories.selectedCategory)}),[e.categories.selectedCategory]),Object(n.useEffect)((function(){e.fetchCategories(),e.fetchProducts()}),[]);var t=function(t,c){var n=t.target.closest(".products__categories-item");document.querySelectorAll(".products__categories-item").forEach((function(e){e.classList.remove("active")})),n.classList.add("active"),e.categorySelect(c)};return Object(j.jsxs)("section",{className:"products",children:[Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(Ge,{}),Object(j.jsx)(Fe,{}),Object(j.jsxs)("div",{className:"products__wrapper d-flex jc-sb",children:[Object(j.jsx)("aside",{className:"products__aside",children:Object(j.jsx)("nav",{className:"products__categories",children:e.categories.isLoading?Object(j.jsx)(Oe,{}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{className:"products__categories-item",children:Object(j.jsx)("button",{onClick:function(e){return t(e,"al1al1")},children:"\u0412\u0441\u0435"})}),e.categories.categories.map((function(e){return Object(j.jsx)("li",{className:"products__categories-item",children:Object(j.jsx)("button",{id:e.id,onClick:function(c){return t(c,e.name)},children:e.name})},e.id)}))]})})}),Object(j.jsx)("div",{className:"products__content",children:Object(j.jsx)("ul",{className:"products__list",children:e.products.isLoading?Object(j.jsx)(Oe,{}):(e.products.filteredProducts.length>=1?e.products.filteredProducts:e.products.products).map((function(e,t){return Object(j.jsx)(Me,{product:e},t)}))})})]})]}),"Hello from products"]})}));function Xe(){return Object(j.jsx)("footer",{className:"footer",children:"Footer"})}function We(){return Object(j.jsx)("div",{children:"404"})}var ze=[{name:"Iphone",price:32e4,description:"Apple is goood"},{name:"Samsung",price:22e4,description:"also good"},{name:"Xiaomi",price:5e4,description:"Dlya bomzhei"}];var Ke=Object(d.b)((function(e){return{products:e.products}}))((function(e){var t;return Object(n.useEffect)((function(){t=e.products.products.length>1?e.products.products:ze,console.log(t)}),[e.products.products]),Object(j.jsxs)("div",{children:[Object(j.jsx)(Fe,{}),Object(j.jsx)(Ge,{}),Object(j.jsx)("ul",{className:"products-list",children:ze.map((function(e,t){return Object(j.jsx)(Me,{product:e},t)}))})]})}));var Ye=Object(d.b)((function(e){return{search:e.search}}))((function(e){var t=e.search.value;return Object(j.jsx)("section",{className:"search",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(Ge,{}),Object(j.jsxs)("h2",{className:"title",children:["\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ",t]}),Object(j.jsx)("ul",{className:"search__list",children:e.search.products.map((function(e,t){return Object(j.jsx)(Me,{product:e},t)}))})]})})}));function Be(){return Object(j.jsxs)(o.a,{children:[Object(j.jsx)(Ue,{}),Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{path:"/",component:Se,exact:!0}),Object(j.jsx)(i.b,{path:"/products",component:Ve}),Object(j.jsx)(i.b,{path:"/categories",component:He}),Object(j.jsx)(i.b,{path:"/abc",component:Ke}),Object(j.jsx)(i.b,{path:"/search",component:Ye}),Object(j.jsx)(i.b,{component:We})]}),Object(j.jsx)(Xe,{})]})}var Qe=function(){return{type:N}},Je=function(){return console.log("success"),{type:y}},Ze=function(){return{type:S}};c(75);var $e=Object(d.b)((function(e){return{auth:e.auth}}),(function(e){return{authTest:function(t,c){return e(function(e,t){return function(c){c(Qe),console.log(e,t),K.auth().signInWithEmailAndPassword(e,t).then((function(){c(Je())})).catch((function(){c(Ze())}))}}(t,c))}}}))((function(e){var t=Object(i.g)(),c=Object(n.useState)(!1),r=Object(h.a)(c,2),a=r[0],s=r[1],o=Object(n.useState)(""),u=Object(h.a)(o,2),l=u[0],d=u[1],b=Object(n.useState)(""),f=Object(h.a)(b,2),O=f[0],m=f[1];Object(n.useEffect)((function(){console.log(e),e.auth.isLoggedIn&&(d(""),m(""),s(!1),console.log("loggedin"),t.push("/admin/products"))}),[e.auth.isLoggedIn]),Object(n.useEffect)((function(){e.auth.isChecked&&!e.auth.isLoggedIn&&(d("alert-danger"),m("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"),s(!0))}),[e.auth.isChecked]);return Object(j.jsxs)("section",{className:"auth",children:[Object(j.jsx)(Ae,{active:a,type:l,children:O}),Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("form",{className:"form",onSubmit:function(t){return function(t){t.preventDefault();var c=t.target[0].value,n=t.target[1].value;e.authTest(c,n)}(t)},children:[Object(j.jsx)("input",{className:"form__item",type:"text",placeholder:"\u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d"}),Object(j.jsx)("input",{className:"form__item",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(j.jsx)("button",{className:"form__submit",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})})]})}));c(76);function et(){return Object(j.jsx)("header",{className:"header",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"header__wrapper",children:[Object(j.jsx)(o.b,{to:"/",className:"header__logo",children:"Skinali"}),Object(j.jsxs)("ul",{className:"header__nav",children:[Object(j.jsx)("li",{className:"header__nav-item",children:Object(j.jsx)(o.c,{to:"/admin/products",children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u044b "})}),Object(j.jsx)("li",{className:"header__nav-item",children:Object(j.jsx)(o.c,{to:"/admin/categories",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})})]})]})})})}function tt(){return Object(j.jsx)("footer",{className:"footer",children:Object(j.jsx)("div",{className:"container",children:"Hello from footer"})})}function ct(){return Object(j.jsxs)(o.a,{children:[Object(j.jsx)(et,{}),Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(b,{path:"/admin/products",component:pe}),Object(j.jsx)(b,{path:"/admin/categories",component:ye}),Object(j.jsx)(i.b,{component:We})]})}),Object(j.jsx)(tt,{})]})}var nt=function(){return Object(j.jsx)(o.a,{children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{path:"/auth",component:$e}),Object(j.jsx)(b,{path:"/admin",component:ct}),Object(j.jsx)(i.b,{path:"/",component:Be}),Object(j.jsx)(i.b,{component:We})]})})},rt=c(23),at=c(44),st={user:"",loginValue:"",passwordValue:"",isLoading:!1,isLoggedIn:!0,isChecked:!1},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0});case y:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,isLoggedIn:!0,isChecked:!1});case S:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,isLoggedIn:!1,isChecked:!0});case C:return Object(u.a)(Object(u.a)({},e),{},{loginValue:t.value});case E:return Object(u.a)(Object(u.a)({},e),{},{passwordValue:t.value});default:return e}},it={added:!1,isLoading:!1,loadError:!1,deleted:!1,edited:!1},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(u.a)(Object(u.a)({},e),{},{added:!1,loadError:!1,deleted:!1,isLoading:!1,edited:!1});case L:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0});case w:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,loadError:!1,added:!0});case T:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,loadError:!0});case R:return Object(u.a)(Object(u.a)({},e),{},{edited:!0});case k:return Object(u.a)(Object(u.a)({},e),{},{loadError:!0});default:return e}},lt={added:!1,isLoading:!1,loadError:!1,deleted:!1},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(u.a)(Object(u.a)({},e),{},{added:!1,loadError:!1,deleted:!1,isLoading:!1});case P:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0});case A:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,loadError:!1,added:!0});case I:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,loadError:!0});case U:return Object(u.a)(Object(u.a)({},e),{},{deleted:!0});default:return e}},jt={products:[],filteredProducts:[],isLoading:!0,loadError:!1},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case v:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0});case _:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,loadError:t.error});case D:return Object(u.a)(Object(u.a)({},e),{},{products:t.products,isLoading:!1});case X:return Object(u.a)(Object(u.a)({},e),{},{products:t.products});case V:return Object(u.a)(Object(u.a)({},e),{},{filteredProducts:t.products});default:return e}},ft={categories:[],selectedCategory:"",isLoading:!0,loadError:!1},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0});case _:return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,loadError:t.error});case H:return Object(u.a)(Object(u.a)({},e),{},{categories:t.categories,isLoading:!1});case F:return Object(u.a)(Object(u.a)({},e),{},{selectedCategory:t.category});default:return e}},mt={value:"",products:[]},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(u.a)(Object(u.a)({},e),{},{products:t.products});case q:return Object(u.a)(Object(u.a)({},e),{},{value:t.value});case G:return Object(u.a)(Object(u.a)({},e),{},{value:"",products:[]});default:return e}},ht={products:[],total:""},gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(u.a)(Object(u.a)({},e),{},{products:t.products,total:t.total});default:return e}},xt=Object(rt.c)({adminProducts:dt,adminCategories:ut,auth:ot,products:bt,categories:Ot,search:pt,cart:gt}),vt="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):rt.d,_t=Object(rt.e)(xt,vt(Object(rt.a)(at.a)));s.a.render(Object(j.jsx)(d.a,{store:_t,children:Object(j.jsx)(nt,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.c4bd46ed.chunk.js.map